# SPDX-FileCopyrightText: 2020 Helmholtz Centre for Environmental Research (UFZ)
# SPDX-FileCopyrightText: 2020 Helmholtz-Zentrum Dresden-Rossendorf (HZDR)
#
# SPDX-License-Identifier: Apache-2.0

---
# Keepalived version
keepalived_version: '2.1.5'
# URL from which Keepalived can be downloaded
keepalived_download_url: "https://www.keepalived.org/software/keepalived-{{ keepalived_version }}.tar.gz"
# List of dependencies of Keepalived
keepalived_dependencies:
  - 'build-essential'
  - 'curl'
  - 'gcc'
  - 'libssl-dev'
  - 'libnl-3-dev'
  - 'libnl-genl-3-dev'
  - 'libsnmp-dev'
# Name of Keepalived
keepalived_name: 'keepalived'

# Name of Keepalived user
keepalived_user: 'keepalived'
# Name of Keepalived group
keepalived_group: 'keepalived'

# Enable script security
set_script_security_flag: true
# HAProxy user for executing keepalived script
haproxy_user: 'haproxy'
# HAProxy group for executing keepalived script
haproxy_group: 'haproxy'
# HAProxy process name to be check by Keepalived
haproxy_process_name: 'haproxy'

# Folder to put the Keepalived installation into
keepalived_base_dir: '/usr/local'
# Path to Keepalived build folder
keepalived_build_dir: "{{ keepalived_base_dir }}/{{ keepalived_name }}"
# Folder which contains Keepalived sources
keepalived_dir: "{{ keepalived_build_dir }}/keepalived"
# Path to Keepalived binary
keepalived_path: "{{ keepalived_build_dir }}/sbin/{{ keepalived_name }}"
# Folder for configuration files
keepalived_conf_dir: '/etc/keepalived'
# Path to Keepalived configuration file
keepalived_conf_file_path: "{{ keepalived_conf_dir }}/{{ keepalived_name }}.conf"
# Name of the template file for Systemd service
keepalived_service_template: 'keepalived.service'
# Folder into which Keepalived service file is copied
keepalived_systemd_dir: '/etc/systemd/system'
# Name of Keepalived service file
keepalived_service_file: 'keepalived.service'
# Path to Keepalived service template file
keepalived_service_template_file_path: "{{ keepalived_dir }}/{{ keepalived_service_file }}"
# Path to Keepalived service file
keepalived_service_file_path: "{{ keepalived_systemd_dir }}/{{ keepalived_service_file }}"

# Configure notification email address
notification_email: 'name@localhost'
# Configure notification sender
notification_email_from: 'keepalived@localhost'
# Configure SMTP Server
smtp_server: '127.0.0.1'
# Keepalived instance authentication password
auth_pass: 'changeme'
# Keepalived instance virtual router ID
virtual_router_id: '51'
# Keepalived instance priority
priority: "{{ '100' if state == 'MASTER' else '99' }}"
# Keepalived instance state MASTER or BACKUP
state: 'MASTER'
# Keepalived instance network interface
interface: "{{ ansible_default_ipv4.interface }}"
# Keepalived instance virtual IP address and network interface
virtual_ipaddress_config: "{{ virtual_ip_address }} dev {{ interface }}"
# Keepalived instance unicast source IP address
unicast_src_ip: '{{ ansible_default_ipv4.address }}'

...
